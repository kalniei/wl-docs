<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Olia Kalniei">
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Franchise Manager - WinLocal - dokumentation</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <link href="../../css/extra.css" rel="stylesheet">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand" href="../..">WinLocal - dokumentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Functionalities <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Admin</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../user-accounts/" class="dropdown-item">User Accounts</a>
</li>
            
<li>
    <a href="../subscription-plans/" class="dropdown-item">Subscription Plans</a>
</li>
            
<li>
    <a href="../promo-code-manager/" class="dropdown-item">Promo Code Manager</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">Franchise Manager</a>
</li>
            
<li>
    <a href="../create-user/" class="dropdown-item">Create User</a>
</li>
            
<li>
    <a href="../export-all-contacts/" class="dropdown-item">Export All Contacts</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Main User Functionalities</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../user/dashboard/" class="dropdown-item">Dashboard</a>
</li>
            
<li>
    <a href="../../user/contacts-manager/" class="dropdown-item">Contacts Manager</a>
</li>
            
<li>
    <a href="../../user/winners-manager/" class="dropdown-item">Winners Manager</a>
</li>
            
<li>
    <a href="../../user/staff-members/" class="dropdown-item">Staff Members</a>
</li>
            
<li>
    <a href="../../user/my-profile/" class="dropdown-item">My Profile</a>
</li>
            
<li>
    <a href="../../user/short-link/" class="dropdown-item">Short Links</a>
</li>
            
<li>
    <a href="../../user/notifications/" class="dropdown-item">Notifications</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Onboarding</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../onboarding/user-info/" class="dropdown-item">User Info</a>
</li>
            
<li>
    <a href="../../onboarding/payment/" class="dropdown-item">Payment</a>
</li>
            
<li>
    <a href="../../onboarding/sms-campaign/" class="dropdown-item">SMS Campaign</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Campaigns</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../campaigns/campaign-manager/" class="dropdown-item">Campaign Manager</a>
</li>
            
<li>
    <a href="../../campaigns/campaign-builder/" class="dropdown-item">Campaign Builder</a>
</li>
            
<li>
    <a href="../../campaigns/push-your-limits/" class="dropdown-item">Push Your Limits</a>
</li>
            
<li>
    <a href="../../campaigns/additional-sms-campaign/" class="dropdown-item">Additional SMS Campaign</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Access Actions</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../account/login/" class="dropdown-item">Login</a>
</li>
            
<li>
    <a href="../../account/logout/" class="dropdown-item">Logout</a>
</li>
            
<li>
    <a href="../../account/reset-password/" class="dropdown-item">Reset password</a>
</li>
            
<li>
    <a href="../../account/register/" class="dropdown-item">Register</a>
</li>
            
<li>
    <a href="../../account/confirmation-link/" class="dropdown-item">Confirmation Link</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Current Franchises <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../franchises/default-franchise/" class="dropdown-item">Default</a>
</li>
                                    
<li>
    <a href="../../franchises/support-local-franchise/" class="dropdown-item">SupportLocal</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../promo-code-manager/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../create-user/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://gitlab.lim.bz/dev/wl-dokumentation" class="nav-link">Gitlab</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            
            <li class="nav-item" data-level="2"><a href="#add-franchise" class="nav-link">Add Franchise</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#franchise-table" class="nav-link">Franchise Table</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#edit-franchise" class="nav-link">Edit Franchise</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h6 id="franchise-manager">Franchise Manager<a class="headerlink" href="#franchise-manager" title="Permanent link">ðŸ”—</a></h6>
<p>Admin View only.
Here admin can manage subscription Franchise.</p>
<p><strong>Franchise</strong> - it is a wrapper for users with it's own plans and special functionalities.</p>
<p>Franchises get a signup link - all clients that register via  that link belong to that franchise. 
Accounts can be tracked by franchise</p>
<p>The Franchise Sign Up Link also has a default subscription plan.</p>
<h2 id="add-franchise">Add Franchise<a class="headerlink" href="#add-franchise" title="Permanent link">ðŸ”—</a></h2>
<p>When adding a new franchise we should :</p>
<ul>
<li>
<p>get registration/login link for franchise (user registered by that link/form will be assigned to the particular franchise). The page will display fanchase logo instead of WinLocal logo and franchise supporting image at the left of the login/registration form. For example: <em>https://client.winlocal.xyz/?f=franchiseName</em></p>
</li>
<li>
<p>choose a subscriptions plans availible for that franchise.</p>
</li>
<li>
<p>choose a default plan for new registered users.</p>
</li>
<li>
<p>add two letter as shortlink prefix ie. WL for shortlinks for WinLocal franchise (default franchise), SL for Support Local franchise etc.</p>
</li>
</ul>
<p>To create a new franchise:</p>
<pre><code>POST /v1/franchise
</code></pre>
<p>Request JSON body:</p>
<pre><code>{
    &quot;name&quot;: &quot;My Franchise 3&quot;,
    &quot;prefix&quot;: &quot;m3&quot;,
    &quot;defaultPlan&quot;: &quot;free&quot;,
    &quot;plans&quot;: [1,2,3]
} 
</code></pre>
<p>At the moment of franchise creation you need to provide a list of available Plan IDs or Plan SLUGs.</p>
<p>To get list of all available plans:</p>
<pre><code>GET /v1/plan
</code></pre>
<p><strong>Franchise name</strong> must be unique for each franchise - based on the franchise name there will be relevant slug generated.</p>
<p><strong>Prefix</strong> must be exactly of 2 characters length.</p>
<p><strong>Default plan</strong> should be declared for each franchise, it is as SLUG of Plan which is being automatically applied for newly registered franchise users. Default plan should also be included within the assigned plans array.</p>
<p>Expected output - newly created Franchise object:</p>
<pre><code>{
  &quot;id&quot;: 1,
  &quot;slug&quot;: &quot;test-123&quot;,
  &quot;name&quot;: &quot;test-123&quot;,
  &quot;prefix&quot;: &quot;t3&quot;,
  &quot;logoUrl&quot;: null,
  &quot;signUpImageUrl&quot;: null,
  &quot;defaultPlan&quot;: &quot;free&quot;,
  &quot;plans&quot;: [1,2,3]
}
</code></pre>
<p>After franchise is created and we get new franchise id we are able to save added images sending origin and cropped images to endpoints:</p>
<p>uploadUrl: POST <code>/v1/upload/franchise/${franchiseId}/logo</code>;</p>
<p>signupUploadUrl: POST <code>/v1/upload/franchise/${franchiseId}/signup</code>;</p>
<p>Request JSON body:</p>
<pre><code>{
  image: (binary)
  original: (binary)
}
</code></pre>
<p>Expected output: </p>
<pre><code>{
  imageUrl: &quot;https://winlocal-stage-client-panel.s3.us-east-2.amazonaws.com/franchise/${franchiseId}/signup/d8d13f9eab43efb6dfa8749e08d4e4407af39308.png&quot;
}

and

{
  imageUrl: &quot;https://winlocal-stage-client-panel.s3.us-east-2.amazonaws.com/franchise/${franchiseId}/logo/9d4d79369b548551a2febea0d3e438b3fc01ecbc.png&quot;
}
</code></pre>
<h2 id="franchise-table">Franchise Table<a class="headerlink" href="#franchise-table" title="Permanent link">ðŸ”—</a></h2>
<p>Franchise table is a simple table without backend pagination and filtration options.</p>
<p>We refresh Plan table every 20 seconds.</p>
<p>To get a list of all available franchises:</p>
<pre><code>GET /v1/franchise
</code></pre>
<p>Example response without plans:</p>
<pre><code>[
    {
        &quot;id&quot;: 2,
        &quot;slug&quot;: &quot;my-franchise&quot;,
        &quot;name&quot;: &quot;My Franchise&quot;,
        &quot;prefix&quot;: &quot;mf&quot;,
        &quot;defaultPlan&quot;: &quot;free&quot;,
        logoUrl: &quot;https://supportlocal-stage.lim.bz/img/support_local.png&quot;,
        signUpImageUrl: &quot;https://winlocal-stage-client-panel.s3.us-east-2.amazonaws.com/franchise/1/signup/game-screen1.png&quot;
    }
]
</code></pre>
<pre><code>GET /v1/franchise?plans=1
</code></pre>
<p>Example response with plans:</p>
<pre><code>[
    {
        &quot;id&quot;: 2,
        &quot;slug&quot;: &quot;my-franchise&quot;,
        &quot;name&quot;: &quot;My Franchise&quot;,
        &quot;prefix&quot;: &quot;mf&quot;,
        &quot;defaultPlan&quot;: &quot;free&quot;,
         logoUrl: &quot;https://supportlocal-stage.lim.bz/img/support_local.png&quot;,
        signUpImageUrl: &quot;https://winlocal-stage-client-panel.s3.us-east-2.amazonaws.com/franchise/1/signup/game-screen1.png&quot;
        &quot;plans&quot;: [
            {
                &quot;id&quot;: 1,
                &quot;tag&quot;: &quot;free&quot;,
                &quot;name&quot;: &quot;Plan FREE&quot;,
                &quot;stripeId&quot;: null
            },
            {
                &quot;id&quot;: 2,
                &quot;tag&quot;: &quot;standard&quot;,
                &quot;name&quot;: &quot;Plan STANDARD&quot;,
                &quot;stripeId&quot;: &quot;membership_monthly&quot;
            },
            {
                &quot;id&quot;: 3,
                &quot;tag&quot;: &quot;unlimited&quot;,
                &quot;name&quot;: &quot;Plan FREE and UNLIMITED&quot;,
                &quot;stripeId&quot;: null
            }
        ]
    }
]
</code></pre>
<p>Get single franchise details:</p>
<pre><code>GET /v1/franchise/{slugId}
</code></pre>
<p>Example response:</p>
<pre><code>{
    &quot;id&quot;: 2,
    &quot;slug&quot;: &quot;my-franchise&quot;,
    &quot;name&quot;: &quot;My Franchise&quot;,
    &quot;prefix&quot;: &quot;mf&quot;,
    logoUrl: &quot;https://supportlocal-stage.lim.bz/img/support_local.png&quot;,
    signUpImageUrl: &quot;https://winlocal-stage-client-panel.s3.us-east-2.amazonaws.com/franchise/1/signup/game-screen1.png&quot;
    &quot;defaultPlan&quot;: &quot;free&quot;
}
</code></pre>
<p>All endpoints above accepts extra query parameters (note: within URL query path):
- <code>plans</code> -&gt; if set to 1 will add to franchise output, plan details assigned to franchise;
- <code>permissions</code> -&gt; requires also <code>plans=1</code> if set to <code>1</code> will add permission list to plans assigned to each franchise.</p>
<h3 id="edit-franchise">Edit Franchise<a class="headerlink" href="#edit-franchise" title="Permanent link">ðŸ”—</a></h3>
<p>To update existing franchise:</p>
<pre><code>PUT /v1/franchise
</code></pre>
<p>Request JSON body:</p>
<pre><code>{
  &quot;id&quot;: 4,
  &quot;slug&quot;: &quot;my-franchise-3&quot;,
  &quot;name&quot;: &quot;My Franchise 3&quot;,
  &quot;prefix&quot;: &quot;m3&quot;,
  &quot;logoUrl&quot;: &lt;urlForImage&gt;,
  &quot;signUpImageUrl&quot;: &lt;urlForImage&gt;,
  &quot;defaultPlan&quot;: &quot;free&quot;,
  &quot;plans&quot;: [
    {
        &quot;id&quot;: 1,
        &quot;tag&quot;: &quot;free&quot;,
        &quot;slug&quot;: &quot;default-free&quot;,
        &quot;name&quot;: &quot;Plan FREE&quot;,
        &quot;stripeId&quot;: null,
        &quot;period&quot;: null
    },
    {
        &quot;id&quot;: 2,
        &quot;tag&quot;: &quot;paid&quot;,
        &quot;slug&quot;: &quot;default-paid&quot;,
        &quot;name&quot;: &quot;Plan STANDARD&quot;,
        &quot;stripeId&quot;: &quot;membership_monthly&quot;,
        &quot;period&quot;: &quot;month&quot;
    }
  ]
}
</code></pre>
<p>You can update franchise details as above. As a plan list you can forward an array of plan IDs or SLUGs (as on creation example) or forward an array of full Plan objects which must include at least Plan ID parameter.</p>
<p>You can change uploaded images using the same endpoints as for adding new franchise.</p>
<p><strong>Note: </strong> - if you don't change the image , the image will not be updated.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
