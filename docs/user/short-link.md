###### Short Link

Last known short links mock up - [invisionapp](https://projects.invisionapp.com/share/SVUOPET2KYG#/screens/391817777)
It gets general idea on how it should work, but design is a little bit changed.

## Add Short Link

Pressing the button "Create Short Links" the modal with form will pop.
In this modal we can create short links for campaigns and add an image that will appear on social networks when this link is shared.


**ASSIGN A SHORT LINK**

This firld has 2 elements:

1) Select with all avaliable **domains** for current user.

We get avaliable domains for user form Store - `user.domains` - it is an array. As a default we set first domain form the array.

If there is no elements in the array - we get default domain form .env: `VUE_APP_SHORTLINK_DOMAIN=wldev.lim.bz`

2) Input for short link **alias**.

Spaces are not allowed. Alias musy be unique. We check if entered alias is avaliable by sending request:

```
POST /v1/shorteners/check
```

Request JSON body:

```
domain: string,
alias: string,
```

Expected output: 
```
{
  alias: [true | false]
}
```

**Assign a Campaign**

Single select field. Here we choose what campaign our short link will redirect us.

For the options we send request to get all users campaigns:

```
GET /v1/campaigns?page=1&showAllRecords=1
```
It will return all campaigns of user. After selections we get `campaignId` as a property of new Short Link.


**IMAGE**

Upload image, title an description - will appear on social networks when this short link is shared.

Tilte can have max 10 characters.

Description can have max 40 characters.


**Savign Short Link**

```
POST /v1/shorteners
```

Request JSON body:

```
alias: "test"
campaignId: 3052
description: "test description"
domain: "205.d.lnx.bz"
id: null
imageTitle: "test title"
imageUrl: "blob:https://client.winlocal.xyz/48979650-c8ab-40aa-aa56-21b47943c9ae"
```

Expected output - the Short Link Object with assigned id.

When we recieve our Short Link Object with assigned id - we send a separate request for saving image:

```
POST /v1/upload/shortener/${shortLinkId}/thumbnail
```
Request JSON body:

```
{
  image: (binary)
  original: (binary)
}
```

Expected output: 
```
{
  imageUrl: "https://winlocal-stage-client-panel.s3.us-east-2.amazonaws.com/shortener/thumbnail/d5835c74c6ad36e68c6d35ad9b564a82c917001d.png"
}
```

## Short Links Table  

Paginated list of all short links.

We refresh Short Links table every **20** seconds.

By default pagination is set to **10** records.

All columns ARE NOT sortable at this time. ( though it would be nice to have this opportunity)

No columns have filters inside the table at this time. ( though it would be nice to have this opportunity)

We use this route for getting short links:

```
GET /v1/shorteners
```

Optional parameter for pagination:

```
  page: number;
  itemsPerPage: number; - 5 | 10 | 15
  showAllRecords: boolean;
```

We have an optional param for filtering: `filters[]=alias,l,test`

This option is avaliable as a separated filter above the table.

Expected output:

```
{
  data: [
    {
      alias: "zyrafa"
      campaign: {
        id: 3052,
        name: "SMS Campaign",
        url: "https://205.d.lnx.bz/zyrafa"
      }
      createdAt: "2020-08-24T13:48:37+0000"
      description: "Autogenerated default campaign shortener"
      domain: "205.d.lnx.bz"
      id: 1895
      imageTitle: "test"
      imageUrl: "https://winlocal-stage-client-panel.s3.us-east-2.amazonaws.com/shortener/thumbnail/650dbf493f296fdc046cbdbb7c6e8e3adbb15909.png"
    }
    ...
  ],
  state: {
  fields: []
  filterBy: null
  filterValue: null
  filters: []
  itemsCount: 10
  itemsPerPage: 10
  joins: []
  page: 1
  showAllRecords: false
  sortBy: null
  sortDesc: false
  totalItems: 45
  totalPages: 5
  }
}
```

Each row reprezents one short link. Each short link has two actions avaliable: delete and edit.
You can also delete multiple short links - there are checkboxes for all short links.

### Delete Short Links

There are two ways of deleting short links - on icon under Actions, or checkking the short link and deleting on button click above the table.

On Delete - the confirmation modal with links details will pop up.

If you choose more then one link - we will send separated requests for each link.

[TO CONSIDER] - make it one request with array ids.

```
DELETE /v1/shorteners/${shortLinkId}`
```
Recieved output: `"OK"` - we should consider change it.

### Edit Short Link

When we click on edit Short Link - the modal will pop up. It is the same form as [add Short Link](#add-short-link), just instead of POST we send PUT request

```
PUT /v1/shorteners/${shortLinkId.id}
```