<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Olia Kalniei">
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Short Links - WinLocal - dokumentation</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <link href="../../css/extra.css" rel="stylesheet">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <a class="navbar-brand" href="../..">WinLocal - dokumentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Functionalities <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Admin</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../admin/user-accounts/" class="dropdown-item">User Accounts</a>
</li>
            
<li>
    <a href="../../admin/subscription-plans/" class="dropdown-item">Subscription Plans</a>
</li>
            
<li>
    <a href="../../admin/promo-code-manager/" class="dropdown-item">Promo Code Manager</a>
</li>
            
<li>
    <a href="../../admin/franchise-manager/" class="dropdown-item">Franchise Manager</a>
</li>
            
<li>
    <a href="../../admin/create-user/" class="dropdown-item">Create User</a>
</li>
            
<li>
    <a href="../../admin/export-all-contacts/" class="dropdown-item">Export All Contacts</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Main User Functionalities</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../dashboard/" class="dropdown-item">Dashboard</a>
</li>
            
<li>
    <a href="../contacts-manager/" class="dropdown-item">Contacts Manager</a>
</li>
            
<li>
    <a href="../winners-manager/" class="dropdown-item">Winners Manager</a>
</li>
            
<li>
    <a href="../staff-members/" class="dropdown-item">Staff Members</a>
</li>
            
<li>
    <a href="../my-profile/" class="dropdown-item">My Profile</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">Short Links</a>
</li>
            
<li>
    <a href="../notifications/" class="dropdown-item">Notifications</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Onboarding</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../onboarding/user-info/" class="dropdown-item">User Info</a>
</li>
            
<li>
    <a href="../../onboarding/payment/" class="dropdown-item">Payment</a>
</li>
            
<li>
    <a href="../../onboarding/sms-campaign/" class="dropdown-item">SMS Campaign</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Campaigns</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../campaigns/campaign-manager/" class="dropdown-item">Campaign Manager</a>
</li>
            
<li>
    <a href="../../campaigns/campaign-builder/" class="dropdown-item">Campaign Builder</a>
</li>
            
<li>
    <a href="../../campaigns/push-your-limits/" class="dropdown-item">Push Your Limits</a>
</li>
            
<li>
    <a href="../../campaigns/additional-sms-campaign/" class="dropdown-item">Additional SMS Campaign</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Access Actions</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../account/login/" class="dropdown-item">Login</a>
</li>
            
<li>
    <a href="../../account/logout/" class="dropdown-item">Logout</a>
</li>
            
<li>
    <a href="../../account/reset-password/" class="dropdown-item">Reset password</a>
</li>
            
<li>
    <a href="../../account/register/" class="dropdown-item">Register</a>
</li>
            
<li>
    <a href="../../account/confirmation-link/" class="dropdown-item">Confirmation Link</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Current Franchises <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../franchises/default-franchise/" class="dropdown-item">Default</a>
</li>
                                    
<li>
    <a href="../../franchises/support-local-franchise/" class="dropdown-item">SupportLocal</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../my-profile/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../notifications/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://gitlab.lim.bz/dev/wl-dokumentation" class="nav-link">Gitlab</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            
            <li class="nav-item" data-level="2"><a href="#add-short-link" class="nav-link">Add Short Link</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#short-links-table" class="nav-link">Short Links Table</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="3"><a href="#delete-short-links" class="nav-link">Delete Short Links</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="3"><a href="#edit-short-link" class="nav-link">Edit Short Link</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h6 id="short-link">Short Link<a class="headerlink" href="#short-link" title="Permanent link">ðŸ”—</a></h6>
<p>Last known short links mock up - <a href="https://projects.invisionapp.com/share/SVUOPET2KYG#/screens/391817777">invisionapp</a>
It gets general idea on how it should work, but design is a little bit changed.</p>
<h2 id="add-short-link">Add Short Link<a class="headerlink" href="#add-short-link" title="Permanent link">ðŸ”—</a></h2>
<p>Pressing the button "Create Short Links" the modal with form will pop.
In this modal we can create short links for campaigns and add an image that will appear on social networks when this link is shared.</p>
<p><strong>ASSIGN A SHORT LINK</strong></p>
<p>This field has 2 elements:</p>
<p>1) Select with all available <strong>domains</strong> for current user.</p>
<p>We get available domains for user form Store - <code>user.domains</code> - it is an array. As a default we set first domain form the array.</p>
<p>If there is no elements in the array - we get default domain form .env: <code>VUE_APP_SHORTLINK_DOMAIN=wldev.lim.bz</code></p>
<p>2) Input for short link <strong>alias</strong>.</p>
<p>Spaces are not allowed. Alias must be unique. We check if entered alias is available by sending request:</p>
<pre><code>POST /v1/shorteners/check
</code></pre>
<p>Request JSON body:</p>
<pre><code>domain: string,
alias: string,
</code></pre>
<p>Expected output: </p>
<pre><code>{
  alias: [true | false]
}
</code></pre>
<p><strong>Assign a Campaign</strong></p>
<p>Single select field. Here we choose what campaign our short link will redirect us.</p>
<p>For the options we send request to get all users campaigns:</p>
<pre><code>GET /v1/campaigns?page=1&amp;showAllRecords=1
</code></pre>
<p>It will return all campaigns of user. After selections we get <code>campaignId</code> as a property of new Short Link.</p>
<p><strong>IMAGE</strong></p>
<p>Upload image, title a description - will appear on social networks when this short link is shared.</p>
<p>Title can have max 10 characters.</p>
<p>Description can have max 40 characters.</p>
<p><strong>Savign Short Link</strong></p>
<pre><code>POST /v1/shorteners
</code></pre>
<p>Request JSON body:</p>
<pre><code>alias: &quot;test&quot;
campaignId: 3052
description: &quot;test description&quot;
domain: &quot;205.d.lnx.bz&quot;
id: null
imageTitle: &quot;test title&quot;
imageUrl: &quot;blob:https://client.winlocal.xyz/48979650-c8ab-40aa-aa56-21b47943c9ae&quot;
</code></pre>
<p>Expected output - the Short Link Object with assigned id.</p>
<p>When we receive our Short Link Object with assigned id - we send a separate request for saving image:</p>
<pre><code>POST /v1/upload/shortener/${shortLinkId}/thumbnail
</code></pre>
<p>Request JSON body:</p>
<pre><code>{
  image: (binary)
  original: (binary)
}
</code></pre>
<p>Expected output: </p>
<pre><code>{
  imageUrl: &quot;https://winlocal-stage-client-panel.s3.us-east-2.amazonaws.com/shortener/thumbnail/d5835c74c6ad36e68c6d35ad9b564a82c917001d.png&quot;
}
</code></pre>
<h2 id="short-links-table">Short Links Table<a class="headerlink" href="#short-links-table" title="Permanent link">ðŸ”—</a></h2>
<p>Paginated list of all short links.</p>
<p>We refresh Short Links table every <strong>20</strong> seconds.</p>
<p>By default pagination is set to <strong>10</strong> records.</p>
<p>All columns ARE NOT sortable at this time. ( though it would be nice to have this opportunity)</p>
<p>No columns have filters inside the table at this time. ( though it would be nice to have this opportunity)</p>
<p>We use this route for getting short links:</p>
<pre><code>GET /v1/shorteners
</code></pre>
<p>Optional parameter for pagination:</p>
<pre><code>  page: number;
  itemsPerPage: number; - 5 | 10 | 15
  showAllRecords: boolean;
</code></pre>
<p>We have an optional param for filtering: <code>filters[]=alias,l,test</code></p>
<p>This option is available as a separated filter above the table.</p>
<p>Expected output:</p>
<pre><code>{
  data: [
    {
      alias: &quot;zyrafa&quot;
      campaign: {
        id: 3052,
        name: &quot;SMS Campaign&quot;,
        url: &quot;https://205.d.lnx.bz/zyrafa&quot;
      }
      createdAt: &quot;2020-08-24T13:48:37+0000&quot;
      description: &quot;Autogenerated default campaign shortener&quot;
      domain: &quot;205.d.lnx.bz&quot;
      id: 1895
      imageTitle: &quot;test&quot;
      imageUrl: &quot;https://winlocal-stage-client-panel.s3.us-east-2.amazonaws.com/shortener/thumbnail/650dbf493f296fdc046cbdbb7c6e8e3adbb15909.png&quot;
    }
    ...
  ],
  state: {
  fields: []
  filterBy: null
  filterValue: null
  filters: []
  itemsCount: 10
  itemsPerPage: 10
  joins: []
  page: 1
  showAllRecords: false
  sortBy: null
  sortDesc: false
  totalItems: 45
  totalPages: 5
  }
}
</code></pre>
<p>Each row represents one short link. Each short link has two actions available: delete and edit.
You can also delete multiple short links - there are checkboxes for all short links.</p>
<h3 id="delete-short-links">Delete Short Links<a class="headerlink" href="#delete-short-links" title="Permanent link">ðŸ”—</a></h3>
<p>There are two ways of deleting short links - on icon under Actions, or checking the short link and deleting on button click above the table.</p>
<p>On Delete - the confirmation modal with links details will pop up.</p>
<p>If you choose more then one link - we will send separated requests for each link.</p>
<p>[TO CONSIDER] - make it one request with array ids.</p>
<pre><code>DELETE /v1/shorteners/${shortLinkId}`
</code></pre>
<p>Received output: <code>"OK"</code> - we should consider change it.</p>
<h3 id="edit-short-link">Edit Short Link<a class="headerlink" href="#edit-short-link" title="Permanent link">ðŸ”—</a></h3>
<p>When we click on edit Short Link - the modal will pop up. It is the same form as <a href="#add-short-link">add Short Link</a>, just instead of POST we send PUT request</p>
<pre><code>PUT /v1/shorteners/${shortLinkId.id}
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
